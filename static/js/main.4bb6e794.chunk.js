(this.webpackJsonpcutoff=this.webpackJsonpcutoff||[]).push([[0],{104:function(e){e.exports=JSON.parse('{"a":"0.1.3"}')},123:function(e,t,a){e.exports=a(193)},128:function(e,t,a){},193:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),o=a.n(c),l=(a(128),a(29)),u=a(31),i=a(28),f=a(14),m=a(15),d=a(219),s=a(222),h=a(224),g=a(225),p=a(241),v=a(229),E=a(83),b=a(39),y=a(24),O=a.n(y),C=a(44),j=a.n(C),w=function(e){return e.replace(/@.*$/,"")},x=function(e){return O()().date()>e},M="".concat(O()().year(),"-").concat(O()().month()+1),N=function(e){for(var t=[],a=-1;a<2;a++){var n=O()().add("".concat(x(e)?a+1:a),"month").year(),r=O()().add("".concat(x(e)?a+1:a),"month").month()+1;t.push("".concat(n,"-").concat(r))}return{newCutoffMonthArray:t,nowCutoffMonth:j()(t,1),lastMonthCutoffMonth:j()(t,0)}}(19),k=N.newCutoffMonthArray,D=N.nowCutoffMonth,T=Object(b.c)({account:"",cutoffDate:19,selectedMonth:M,addType:"add",originCutoffDate:"",sendData:{date:O()().format("YYYY/MM/D"),cufoffMonth:D,payType:0,advanced:0,itemType:"",detail:"",cash:0,nonCash:0,amount:0}}),I=Object(b.c)({date:O()().format("YYYY/MM/D"),cufoffMonth:D,payType:0,advanced:0,itemType:"",detail:"",amount:0,cash:0,nonCash:0}),S=function(e,t){switch(t.type){case"INIT_USER":return e.set("account",t.value);case"INIT_SEND_DATA":return e.set("sendData",I).set("addType","add");case"SET_SELECTED_MONTH":return e.set("selectedMonth",t.value);case"MODIFYDATA":return t.isCutoffDateChange?e.setIn(Object(E.a)(t.value.path),t.value.value).set("isCutoffDateChange",!0):e.setIn(Object(E.a)(t.value.path),t.value.value);case"INIT_MODAL_OPEN":return e.set("sendData",t.data).set("addType","edit").set("originCutoffDate",t.cufoffMonth);default:return e}},A=r.a.createContext(T),_=Object(d.a)((function(e){return{root:{flex:1},menuButton:{marginRight:e.spacing(1)},title:{flex:1,textAlign:"center",borderRadius:"10px"},active:{background:"rgba(0, 0, 0, 0.5)",padding:"5px",borderRadius:"10px"},amount:{flex:2,marginLeft:"10px"}}}));function Y(){var e=_();Object(n.useContext)(A).state;return r.a.createElement("div",{className:e.root},r.a.createElement(s.a,null,r.a.createElement(h.a,null,r.a.createElement(g.a,{className:e.amount},r.a.createElement(p.a,{margin:"normal",label:"\u96f6\u7528\u91d1\u7e3d\u984d",defaultValue:"15000"})),r.a.createElement(g.a,{className:e.amount},r.a.createElement(p.a,{margin:"normal",label:"\u73fe\u91d1\u9918\u984d",defaultValue:"28"})),r.a.createElement(v.a,{variant:"h6",className:e.title},r.a.createElement(u.b,{className:"announcement-data-name",exact:!0,activeClassName:e.active,to:"/add"},"\u65b0\u589e")),r.a.createElement(v.a,{variant:"h6",className:e.title},r.a.createElement(u.b,{className:"announcement-data-name",exact:!0,activeClassName:e.active,to:"/list"},"\u5217\u8868")),r.a.createElement(v.a,{variant:"h6",className:e.title},r.a.createElement(u.b,{className:"announcement-data-name",exact:!0,activeClassName:e.active,to:"/setting"},"\u8a2d\u5b9a")))))}function L(){var e=Object(f.a)(["\nmargin-top:81px;\nwidth:100%;\nheight: calc(100% - 81px);\nbox-sizing:border-box;\n"]);return L=function(){return e},e}function F(){var e=Object(f.a)(["\nposition: fixed;\ntop:0;\nleft:0;\nwidth:100%;\nz-index:99;\n"]);return F=function(){return e},e}function R(){var e=Object(f.a)(["\nwidth:100%;\nheight: 100%;\n"]);return R=function(){return e},e}var z=m.a.div(R()),P=m.a.div(F()),B=m.a.div(L()),J=Object(i.g)((function(e){var t=e.children;return r.a.createElement(z,null,r.a.createElement(P,null,r.a.createElement(Y,null)),r.a.createElement(B,null,t))})),U=a(230),H=a(42),V=H.initializeApp({apiKey:"AIzaSyBS6L40UdcQSBRXgPLwgPR3Q4FFASVqJ_c",authDomain:"cutoff-a0518.firebaseapp.com",databaseURL:"https://cutoff-a0518.firebaseio.com",projectId:"cutoff-a0518",storageBucket:"cutoff-a0518.appspot.com",messagingSenderId:"192068221825",appId:"192068221825",measurementId:"G-HGYC9DH7KR"}),K=function(e){var t=e.account,a=e.selectedMonth;return function(e){var t=e.api,a=Object(n.useState)(Object(b.a)()),r=Object(l.a)(a,2),c=r[0],o=r[1],u=Object(n.useState)(!1),i=Object(l.a)(u,2),f=i[0],m=i[1];return{isLoading:f,fetchApiFunc:function(){m(!0);var e=[];t.once("value",(function(t){var a=t.val();for(var n in a)if(a.hasOwnProperty(n)){var r=Object(b.b)(a[n]).merge(Object(b.b)({key:n}));e.push(r)}o(Object(b.a)(e)),m(!1)}))},fetchData:c}}({api:H.database().ref("/cutoff/".concat(t,"/").concat(a))})};function W(){var e=Object(f.a)(['\nwidth:100%;\nheight: 100%;\nbackground-image:url("assets/login.jpeg");\nbackground-repeat: no-repeat;\nbackground-size: cover;\npadding-top:80px;\n.container{\n  width:70%;\n  /* height: 400px; */\n  /* border:1px solid #8bccf5; */\n  margin: 0 auto;\n  /* background:rgba(139,204,245,0.8); */\n  border-radius:10px;\n  padding:0 5%;\n  padding-bottom:30px;\n  box-sizing:border-box;\n  display: flex;\n  flex-direction:column;\n}\n']);return W=function(){return e},e}var G=m.a.div(W()),Q=Object(i.g)((function(e){var t=e.history,a=Object(n.useState)(localStorage.getItem("account")),c=Object(l.a)(a,2),o=c[0],u=c[1],i=Object(n.useState)(""),f=Object(l.a)(i,2),m=f[0],d=f[1],s=Object(n.useContext)(A).dispatch;return r.a.createElement(G,null,r.a.createElement("div",{className:"container"},r.a.createElement(g.a,null,r.a.createElement(p.a,{margin:"normal",label:"\u5e33\u865f",onChange:function(e){return u(e.target.value)},value:o})),r.a.createElement(g.a,null,r.a.createElement(p.a,{margin:"normal",label:"\u5bc6\u78bc",type:"password",onChange:function(e){return d(e.target.value)}})),r.a.createElement(U.a,{color:"primary",margin:"normal",variant:"contained",onClick:function(){(function(e,t){return V.auth().signInWithEmailAndPassword(e,t)})(o,m).then((function(e){localStorage.setItem("account",o);var a=w(e.user.email);s({type:"INIT_USER",value:a}),t.push("/list")})).catch((function(e){alert(e)}))}},"\u767b\u5165")))})),$=a(238),q=a(243),X=a(246),Z=a(105),ee=a(16),te=a(237);function ae(){var e=Object(f.a)(["\npadding:0 10%;\nwidth:80%;\ndisplay: flex;\nflex-direction:column;\njustify-content:center;\noverflow-y:hidden;\n/* height:90%; */\n"]);return ae=function(){return e},e}var ne=m.a.div(ae()),re=Object(d.a)((function(e){return{margin:{margin:e.spacing(1)}}})),ce=Object(i.g)((function(e){var t=e.location.pathname,a=e.onModalClose,c=e.fetchApiFunc,o=Object(n.useContext)(A),l=o.state,u=o.dispatch,i=l.get("sendData"),f=l.get("account"),m=re(),d=l.get("addType"),s=l.get("originCutoffDate");Object(n.useEffect)((function(){"/add"===t&&u({type:"INIT_SEND_DATA"})}),[u]),Object(n.useEffect)((function(){}),[i,l]);var h=function(){var e=i.get("amount");if(!E(e))return window.alert("\u91d1\u984d\u70ba\u7a7a");if(!b(e))return window.alert("\u91d1\u984d\u4e0d\u662f\u6578\u5b57");var t={account:f,cutoffMonth:i.get("cufoffMonth"),sendData:i.toJS()};if("add"===d)(function(e){var t=e.account,a=e.sendData,n=e.cutoffMonth;return H.database().ref("/cutoff/".concat(t,"/").concat(n)).push(a)})(t).then((function(){window.alert("\u65b0\u589e\u6210\u529f"),u({type:"INIT_SEND_DATA"})}));else if("edit"===d){var n=i.get("key");(function(e){var t=e.account,a=e.sendData,n=e.cutoffMonth,r=e.key,c=e.originCutoffDate;return H.database().ref("/cutoff/".concat(t,"/").concat(c,"/").concat(r)).remove(),H.database().ref("/cutoff/".concat(t,"/").concat(n,"/").concat(r)).update(a)})({account:f,key:n,originCutoffDate:s,cutoffMonth:i.get("cufoffMonth"),sendData:i.delete("key").toJS()}).then((function(){window.alert("\u4fee\u6539\u6210\u529f"),c(),a()}))}},v=function(){var e=i.get("key");(function(e){var t=e.account,a=(e.sendData,e.cutoffMonth),n=e.key;return H.database().ref("/cutoff/".concat(t,"/").concat(a,"/").concat(n)).remove()})({account:f,key:e,cutoffMonth:i.get("cufoffMonth")}).then((function(){window.alert("\u522a\u9664\u6210\u529f"),c(),a()}))},E=function(e){return!!e},b=function(e){return"number"===typeof Number(e)},y=function(e,t){u({type:"MODIFYDATA",value:{path:["sendData",e],value:t}})};return r.a.createElement(ne,{onClick:function(e){return function(e){e.stopPropagation()}(e)}},r.a.createElement(g.a,null,r.a.createElement(ee.a,{utils:Z.a},r.a.createElement(te.a,{disableToolbar:!0,format:"yyyy/MM/dd",margin:"normal",label:"\u8a18\u5e33\u65e5",defaultValue:i.get("date"),value:i.get("date"),onChange:function(e){return function(e,t){var a=O()(t).format("YYYY-MM-D");y(e,a)}("date",e)},KeyboardButtonProps:{"aria-label":"change date"}}))),r.a.createElement(g.a,null,r.a.createElement(q.a,{htmlFor:"age-native-helper"},"\u7d50\u5e33\u6708\u4efd"),r.a.createElement($.a,{label:"\u7a2e\u985e",margin:"normal",labelId:"demo-controlled-open-select-label",value:i.get("cufoffMonth"),InputLabelProps:{shrink:!0},onChange:function(e){var t=e.target;return y("cufoffMonth",t.value)}},k.map((function(e,t){return r.a.createElement(X.a,{value:e,key:t}," ","".concat(e))})))),r.a.createElement(g.a,null,r.a.createElement(q.a,{htmlFor:"age-native-helper"},"\u7a2e\u985e"),r.a.createElement($.a,{margin:"normal",labelId:"demo-controlled-open-select-label",value:i.get("payType"),onChange:function(e){var t=e.target;return y("payType",t.value)}},r.a.createElement(X.a,{value:0},"\u73fe\u91d1"),r.a.createElement(X.a,{value:1},"\u975e\u73fe\u91d1"))),r.a.createElement(g.a,null,r.a.createElement(q.a,{htmlFor:"age-native-helper"},"\u4ee3\u588a"),r.a.createElement($.a,{margin:"normal",labelId:"demo-controlled-open-select-label",value:i.get("advanced"),onChange:function(e){var t=e.target;return y("advanced",t.value)}},r.a.createElement(X.a,{value:0},"\u5426"),r.a.createElement(X.a,{value:1},"\u662f"))),r.a.createElement(g.a,null,r.a.createElement(p.a,{margin:"normal",label:"\u9805\u76ee",value:i.get("itemType"),onChange:function(e){var t=e.target;return y("itemType",t.value)}})),r.a.createElement(g.a,null,r.a.createElement(p.a,{margin:"normal",label:"\u8a73\u60c5",value:i.get("detail"),onChange:function(e){var t=e.target;return y("detail",t.value)}})),r.a.createElement(g.a,null,r.a.createElement(p.a,{margin:"normal",type:"tel",label:"\u91d1\u984d",value:i.get("amount"),onChange:function(e){return function(e){y("amount",e);var t=i.get("payType");0===t&&y("cash",e),1===t&&y("nonCash",e)}(e.target.value)}})),r.a.createElement(g.a,null,r.a.createElement(U.a,{color:"primary",className:m.margin,margin:"normal",variant:"contained",onClick:function(){return h()}},"add"===d?"\u65b0\u589e":"\u7de8\u8f2f"),"edit"===d?r.a.createElement(U.a,{color:"secondary",onClick:function(){return window.confirm("\u78ba\u5b9a\u522a\u9664")&&v()}},"\u522a\u9664"):null))})),oe=a(231),le=a(195),ue=a(232),ie=a(233),fe=a(234),me=a(235),de=a(236);function se(){var e=Object(f.a)(["\nwidth:100%;\nmargin:0 auto;\ndisplay: flex;\njustify-content:center;\n.month{\n    padding:5px 8px;\n    cursor: pointer;\n    &-active{\n        background:rgba(63,82,181,0.9);\n        border-radius:3px;\n    }\n}\n"]);return se=function(){return e},e}var he=m.a.div(se()),ge=function(e){var t=Object(n.useContext)(A),a=t.state,c=t.dispatch,o=a.get("selectedMonth");return r.a.createElement(he,null,k.map((function(e,t){return r.a.createElement("div",{key:t,className:e===o?"month-active month":"month",onClick:function(){return function(e){c({type:"SET_SELECTED_MONTH",value:e})}(e)}},e)})))},pe=a(101),ve=a.n(pe);function Ee(){var e=Object(f.a)(["\nwidth:100%;\ntext-align:center;\n\n"]);return Ee=function(){return e},e}var be=m.a.div(Ee()),ye=function(e){return Object(n.useEffect)((function(){})),r.a.createElement(be,null,r.a.createElement(ve.a,null))},Oe=a(240),Ce=a(103),je=a.n(Ce);function we(){var e=Object(f.a)(["\n  /* width: 50%; */\n  width:100vw;\n  height:100vh;\n  position: fixed;\n  top:0;\n  left:0;\n  z-index:100;\n  background-color: rgba(0, 0, 0, 0.5);\n  overflow:auto;\n  visibility:",";\n  transition:0.3s;\n  .wrapper{\n    width:90%;\n    margin:40px auto;\n    z-index:110;\n    background: #fff;\n    max-height:90vh;\n    overflow:auto;\n  }\n"]);return we=function(){return e},e}var xe=m.a.div(we(),(function(e){return e.isOpen?"visible":"hidden"})),Me=function(e){var t=e.isOpen,a=void 0!==t&&t,c=e.onModalClose,o=void 0===c?je.a:c,l=e.children,u=Object(n.useCallback)((function(e){27===e.keyCode&&o()}),[]);return Object(n.useEffect)((function(){return document.addEventListener("keydown",(function(e){return u(e)}),!1),document.removeEventListener("keydown",(function(e){return u(e)}),!1)}),[]),r.a.createElement(xe,{isOpen:a,onClick:o},r.a.createElement(Oe.a,{classNames:"pop",in:a,timeout:300,unmountOnExit:!0},r.a.createElement("div",{className:"wrapper"},l)))};function Ne(){var e=Object(f.a)(["\npadding:20px;\nwidth:100%;\nheight:70%;\n"]);return Ne=function(){return e},e}m.a.div(Ne());var ke=Object(d.a)({table:{"max-height":"80%"},isAdvanced:{background:"#8792de"}}),De=function(e){var t=Object(n.useContext)(A),a=t.state,c=t.dispatch,o=a.get("account"),u=a.get("selectedMonth"),i=Object(n.useState)(!1),f=Object(l.a)(i,2),m=f[0],d=f[1],s=K({account:o,selectedMonth:u}),h=s.isLoading,g=s.fetchApiFunc,p=s.fetchData;Object(n.useEffect)((function(){g()}),[o,u]),Object(n.useEffect)((function(){}),[p]);var v=ke(),E=function(){var e=0,t=0,a=0;return p.map((function(n){var r=Number(n.get("cash")),c=Number(n.get("nonCash")),o=Number(n.get("amount"));return e+=r,t+=c,a+=o,n})),{totalCash:e,totalNonCach:t,totalAmount:a}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,null),r.a.createElement(oe.a,{component:le.a,className:v.table},r.a.createElement(ue.a,{size:"small","aria-label":"a dense table",stickyheader:!0,stickyfooter:!0},r.a.createElement(ie.a,null,r.a.createElement(fe.a,null,r.a.createElement(me.a,null,"\u6642\u9593"),r.a.createElement(me.a,{align:"left"},"\u9805\u76ee"),r.a.createElement(me.a,{align:"left"},"\u73fe\u91d1"),r.a.createElement(me.a,{align:"left"},"\u975e\u73fe\u91d1"))),h&&r.a.createElement(me.a,{colSpan:4},"  ",r.a.createElement(ye,null)),r.a.createElement(de.a,null,p.map((function(e,t){return r.a.createElement(fe.a,{key:t,className:e.get("advanced")?v.isAdvanced:null,onClick:function(){return function(e){d(!0);var t=e.get("cufoffMonth");c({type:"INIT_MODAL_OPEN",data:e,cufoffMonth:t})}(e)}},r.a.createElement(me.a,{align:"left",component:"th"},e.get("date")),r.a.createElement(me.a,{align:"left"},e.get("itemType")),r.a.createElement(me.a,{align:"left"},e.get("cash")),r.a.createElement(me.a,{align:"left"},e.get("nonCash")))}))))),r.a.createElement(oe.a,null,r.a.createElement(ue.a,{size:"small"},r.a.createElement(ie.a,null,r.a.createElement(fe.a,null,r.a.createElement(me.a,{rowSpan:1,component:"th",scope:"row"}),r.a.createElement(me.a,{align:"right",colSpan:3},j()(E(),"totalCash")),r.a.createElement(me.a,{align:"center"},j()(E(),"totalNonCach")))),r.a.createElement(de.a,null,r.a.createElement(fe.a,null,r.a.createElement(me.a,{rowSpan:1,component:"th",scope:"row"}),r.a.createElement(me.a,{align:"left",colSpan:3},"\u7e3d\u82b1\u8cbb"),r.a.createElement(me.a,{align:"center"},j()(E(),"totalAmount")))))),r.a.createElement(Me,{isOpen:m,onModalClose:function(){return d(!1)}},r.a.createElement(ce,{onModalClose:function(){return d(!1)},fetchApiFunc:g})))},Te=function(){return r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(Q,null)}}),r.a.createElement(J,null,r.a.createElement(i.b,{exact:!0,path:"/add",render:function(){return r.a.createElement(ce,null)}}),r.a.createElement(i.b,{exact:!0,path:"/list",render:function(){return r.a.createElement(De,null)}})),r.a.createElement(i.a,{from:"/",to:"/login"}))},Ie=Object(i.g)((function(e){var t=e.history,a=e.location,c=Object(n.useContext)(A).dispatch,o=a.pathname;return V.auth().onAuthStateChanged((function(e){e&&c({type:"INIT_USER",value:w(e.email)}),e&&"/login"===o?t.push("/list"):e||"/login"===o||t.push("/login")})),r.a.createElement(Te,null)})),Se=a(104);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement((function(){var e=Object(n.useReducer)(S,T),t=Object(l.a)(e,2),a=t[0],c=t[1];return r.a.createElement(A.Provider,{value:{state:a,dispatch:c}},r.a.createElement("div",{version:Se.a}),r.a.createElement(u.a,null,r.a.createElement(Ie,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[123,1,2]]]);
//# sourceMappingURL=main.4bb6e794.chunk.js.map